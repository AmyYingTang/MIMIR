# 项目复盘萃取指南

> **用途**: 从完成的项目中提取可复用的经验，更新方法论库  
> **使用时机**: 项目结束后、阶段性里程碑后、遇到重要踩坑时  
> **目标**: 让知识不流失，让同样的坑不踩两次

---

## 1. 为什么需要复盘萃取？

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                          知识流失 vs 知识沉淀                                │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  没有复盘                              有复盘                                │
│  ─────────                            ─────────                             │
│  项目A踩坑 → 下次遗忘 → 项目B又踩坑     项目A踩坑 → 记录原因 → 更新Skill       │
│       ↓                                    ↓         和解决方案       ↓      │
│  "这个问题好像之前遇到过..."           项目B启动时 ← 自动规避 ← 读取Skill     │
│                                                                             │
│  结果：同样的错误反复犯                  结果：知识累积，效率提升               │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

---

## 2. 复盘时机

| 时机 | 复盘类型 | 深度 |
|------|----------|------|
| **项目结束** | 全面复盘 | 深度 |
| **阶段完成** | 阶段复盘 | 中等 |
| **踩坑时** | 即时记录 | 快速 |
| **好的实践** | 即时记录 | 快速 |

---

## 3. 复盘引导问题

### 3.1 整体回顾

```markdown
让我们回顾一下这个项目：

**项目概况**
1. 项目名称是什么？
2. 项目类型？（Web/App/CLI 等）
3. 项目周期？（开始到结束多久）
4. 团队规模？

**目标达成**
5. 最初的目标是什么？
6. 最终达成了吗？有偏差吗？
7. 如果有偏差，原因是什么？
```

### 3.2 各阶段回顾

```markdown
**需求分析阶段**
1. 需求分析做得充分吗？
2. 有没有遗漏的需求后来才发现？
3. 需求变更多吗？变更的原因是什么？
4. 下次应该多问什么问题？

**技术选型阶段**
5. 技术选型正确吗？
6. 有没有选错技术后来换的？
7. 有没有技术债是因为选型导致的？
8. 下次选型应该注意什么？

**系统设计阶段**
9. 设计阶段有没有返工？
10. 有没有设计时没考虑到的场景？
11. 接口设计需要调整的多吗？
12. 数据库设计需要变更的多吗？

**实现阶段**
13. 开发过程顺利吗？
14. 有什么卡住比较久的问题？
15. 有什么好的代码实践值得保留？
16. 有什么代码结构后来发现不好的？

**测试与部署**
17. 测试覆盖足够吗？
18. 上线过程顺利吗？
19. 有没有上线后才发现的问题？
```

### 3.3 踩坑与收获

```markdown
**踩坑点**
1. 这个项目最大的坑是什么？
2. 浪费时间最多的是什么？
3. 返工最多的是什么？
4. 如果重来，你会怎么避免这些坑？

**收获与亮点**
5. 这个项目做得最好的是什么？
6. 有没有新学到的技术或方法？
7. 有没有可以复用到其他项目的代码/设计？
8. 有没有值得推广的实践？
```

### 3.4 方法论更新建议

```markdown
**更新建议**
基于这次项目经验，你觉得方法论应该：

1. **新增**：有什么内容是方法论里没有但应该加上的？
   - 新的检查项？
   - 新的决策树分支？
   - 新的最佳实践？

2. **修改**：有什么内容需要更新？
   - 过时的推荐？
   - 需要调整的优先级？
   - 需要补充的说明？

3. **强调**：有什么内容方法论里有但容易被忽略？
   - 需要加粗/高亮？
   - 需要加警告？
   - 需要加示例？
```

---

## 4. 萃取模板

复盘完成后，用以下模板记录要更新到方法论的内容：

```markdown
# 复盘萃取记录

## 项目信息
- **项目名称**: [名称]
- **项目类型**: [类型]
- **复盘日期**: [日期]
- **复盘人**: [姓名]

---

## 踩坑记录

### 坑 1: [简短标题]

**情况描述**：
发生了什么？

**根本原因**：
为什么会发生？

**解决方案**：
怎么解决的？

**经验教训**：
下次怎么避免？

**建议更新**：
- [ ] 更新到 `[文件名]` 的 `[章节]`
- 更新内容：[具体内容]

---

### 坑 2: [简短标题]
...

---

## 好的实践

### 实践 1: [简短标题]

**做法描述**：
具体怎么做的？

**效果**：
带来了什么好处？

**适用场景**：
什么情况下适用？

**建议更新**：
- [ ] 新增到 `[文件名]` 的 `[章节]`
- 新增内容：[具体内容]

---

## 方法论更新清单

| 更新类型 | 目标文件 | 更新内容 | 状态 |
|----------|----------|----------|:----:|
| 新增 | `xxx.md` | [内容摘要] | ⬜ |
| 修改 | `xxx.md` | [内容摘要] | ⬜ |
| 删除 | `xxx.md` | [内容摘要] | ⬜ |
```

---

## 5. 常见可萃取内容

### 5.1 检查清单补充

```markdown
发现遗漏的检查项：
- "我们忘记考虑 XXX 了，上线后才发现"
→ 更新到对应的 checklist

示例：
- "忘记考虑数据库时区问题" → 加到数据库设计检查项
- "忘记处理并发锁" → 加到 API 设计检查项
```

### 5.2 决策树补充

```markdown
发现新的决策分支：
- "我们遇到了 XXX 场景，现有决策树没有覆盖"
→ 补充决策树分支

示例：
- "需要处理大文件上传" → 加到技术选型决策树
```

### 5.3 最佳实践补充

```markdown
发现好的做法：
- "我们用了 XXX 方法，效果很好"
→ 记录为最佳实践

示例：
- "用 UUID 作为主键避免了 ID 暴露问题"
- "配置枚举分离让功能上线只需改配置"
```

### 5.4 反模式记录

```markdown
发现要避免的做法：
- "我们做了 XXX，结果很糟糕"
→ 记录为反模式/警告

示例：
- "直接依赖具体实现导致后来换服务很痛苦"
- "没有做日志脱敏导致敏感信息泄露"
```

---

## 6. 更新流程

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                          方法论更新流程                                       │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  1. 复盘                    2. 萃取                    3. 更新              │
│  ┌─────────┐              ┌─────────┐              ┌─────────┐             │
│  │ 回答引导 │      →      │ 填写模板 │      →      │ 更新文件 │             │
│  │ 问题    │              │ 记录    │              │         │             │
│  └─────────┘              └─────────┘              └─────────┘             │
│                                                          │                  │
│                                                          ▼                  │
│                                                    4. 标记版本              │
│                                                    ┌─────────┐             │
│                                                    │ 更新版本 │             │
│                                                    │ 历史    │             │
│                                                    └─────────┘             │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

---

## 7. 版本标记规范

更新方法论文件时，在版本历史中记录：

```markdown
## 版本历史

| 版本 | 日期 | 更新内容 |
|------|------|----------|
| v1.0 | 2025-01-27 | 初始版本 |
| v1.1 | 2025-02-15 | 新增数据库时区检查项 | XX 项目 |
| v1.2 | 2025-03-01 | 补充大文件上传决策分支 | YY 项目 |
```

---

## 8. Agent 使用说明

当用户说"我要做项目复盘"或"更新方法论"时：

1. **确认项目信息**：问项目名称、类型、周期
2. **引导回顾**：按 3.1-3.4 的问题逐步引导
3. **填写模板**：将用户的回答整理成萃取记录
4. **确认更新**：和用户确认要更新哪些内容
5. **执行更新**：更新对应的 Skill 文件
6. **标记版本**：在版本历史中记录本次更新

---

## 版本历史

| 版本 | 日期 | 更新内容 |
|------|------|----------|
| v1.0 | 2025-01-27 | 初始版本 |
