# 企业级关注点检查清单

> **用途**: 确保企业级项目不遗漏关键考量点  
> **使用时机**: 需求分析、系统设计、上线前审查

---

## 1. 认证与身份管理

| 检查项 | 优先级 | 说明 |
|--------|:------:|------|
| 密码使用 bcrypt/Argon2 存储 | P0 | 绝不存储明文 |
| 密码强度校验 | P1 | 最少8位，含字母数字 |
| 登录失败锁定 | P1 | 5次失败锁定15分钟 |
| JWT 合理过期时间 | P1 | Access 30分钟，Refresh 7天 |
| Refresh Token 安全存储 | P1 | httpOnly Cookie |
| 认证层抽象（SSO 预留） | P2 | 便于未来对接企业 SSO |
| 并发登录控制 | P2 | 可选：单设备/多设备 |
| MFA 多因素认证预留 | P3 | 架构预留扩展点 |

---

## 2. 权限控制

| 检查项 | 优先级 | 说明 |
|--------|:------:|------|
| 角色权限模型定义 | P0 | RBAC 或 ABAC |
| 每个 API 都有权限检查 | P0 | 无遗漏 |
| 数据越权检查 | P0 | 用户只能访问自己的数据 |
| 管理员权限可配置 | P1 | 不同管理员不同权限 |
| 权限变更审计 | P2 | 记录谁给谁分配了什么权限 |
| 细粒度权限（字段级） | P3 | 如需要 |

---

## 3. 数据安全

| 检查项 | 优先级 | 说明 |
|--------|:------:|------|
| 敏感数据识别与标记 | P0 | 明确哪些是敏感数据 |
| 敏感数据加密存储 | P0 | AES-256 |
| 传输加密 HTTPS | P0 | TLS 1.2+ |
| 日志脱敏 | P1 | 日志中不记录密码、Token |
| API 响应脱敏 | P1 | 手机号显示为 138****1234 |
| 数据库备份加密 | P1 | 备份文件也要加密 |
| 密钥管理 | P1 | 密钥不入代码库，使用环境变量 |

---

## 4. 审计与合规

| 检查项 | 优先级 | 说明 |
|--------|:------:|------|
| 操作日志 | P1 | 谁在什么时候做了什么 |
| 敏感操作审计 | P1 | 登录、权限变更、数据删除等 |
| 日志保留策略 | P2 | 保留多久，怎么清理 |
| 数据保留策略 | P2 | 用户数据保留期限 |
| GDPR/个人信息保护合规 | P2 | 如涉及个人信息 |
| 数据导出功能 | P3 | 用户有权导出自己的数据 |

---

## 5. 可用性与性能

| 检查项 | 优先级 | 说明 |
|--------|:------:|------|
| 错误处理与友好提示 | P0 | 不暴露技术细节给用户 |
| 超时控制 | P1 | 避免无限等待 |
| API 限流 | P1 | 防止滥用 |
| 健康检查接口 | P1 | `/health` 供监控使用 |
| 缓存策略 | P2 | 热点数据缓存 |
| 负载均衡预留 | P2 | 架构支持多实例 |
| 异步任务队列 | P2 | 长时间任务异步处理 |

---

## 6. 可维护性

| 检查项 | 优先级 | 说明 |
|--------|:------:|------|
| 数据库迁移版本化 | P0 | 使用 Alembic/Flyway 等 |
| 配置与代码分离 | P0 | 环境变量/配置文件 |
| 外部服务抽象 | P1 | 可切换邮件/存储等服务 |
| 功能开关 | P1 | 可动态开关功能 |
| API 文档 | P1 | Swagger/OpenAPI |
| 部署文档 | P1 | 新人能照文档部署 |
| 代码规范 | P1 | Linter + Formatter |

---

## 7. 监控与运维

| 检查项 | 优先级 | 说明 |
|--------|:------:|------|
| 日志收集 | P1 | 集中式日志 |
| 错误追踪 | P1 | Sentry 等 |
| 性能监控 | P2 | APM |
| 告警配置 | P2 | 异常时通知 |
| 数据库备份 | P1 | 定期自动备份 |
| 灾难恢复计划 | P2 | 备份恢复测试 |
| 回滚方案 | P1 | 部署失败可回滚 |

---

## 8. 扩展性预留

| 检查项 | 优先级 | 说明 |
|--------|:------:|------|
| 多语言 i18n 预留 | P3 | 如需要 |
| 多租户预留 | P3 | 如需要 |
| 开放 API 预留 | P3 | 第三方集成 |
| 移动端 API 兼容 | P3 | 如需要 App |

---

## 使用说明

1. **需求分析阶段**: 过一遍此清单，确定哪些是本项目需要的
2. **系统设计阶段**: 针对需要的项设计具体方案
3. **上线前审查**: 检查所有标记为需要的项是否已实现
4. **定期回顾**: 项目演进过程中定期回顾是否需要补充

---

## 版本历史

| 版本 | 日期 | 更新内容 |
|------|------|----------|
| v1.0 | 2025-01-27 | 初始版本 |
