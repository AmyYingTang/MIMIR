# 企业级 Web 项目启动指南

> **Skill 类型**: 企业级 Web 应用  
> **适用场景**: B2B SaaS、内部管理系统、平台型产品、多用户系统  
> **版本**: v1.0  
> **来源**: 基于真实企业级项目经验提炼

---

## 概述

本 Skill 指导 AI Agent 或开发者完成企业级 Web 项目的启动全流程，确保不遗漏关键考量点。

### 企业级项目的核心特征

| 特征 | 说明 | 必须考虑 |
|------|------|:--------:|
| **多用户** | 多人使用，需要账户体系 | ✅ |
| **权限控制** | 不同角色有不同权限 | ✅ |
| **数据安全** | 敏感数据需要保护 | ✅ |
| **可审计** | 操作需要可追溯 | ✅ |
| **高可用** | 不能随便挂掉 | 🔶 |
| **可扩展** | 未来可能需要扩展 | ✅ |
| **合规性** | 可能需要满足法规要求 | 🔶 |

---

## 开发全流程

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                          企业级 Web 项目开发流程                              │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  Phase 1          Phase 2          Phase 3          Phase 4                 │
│  需求分析          技术选型          系统设计          代码实现               │
│  ┌─────────┐      ┌─────────┐      ┌─────────┐      ┌─────────┐            │
│  │ • PRD   │  →   │ • 架构  │  →   │ • 数据库│  →   │ • 后端  │            │
│  │ • 用例  │      │ • 技术栈│      │ • API   │      │ • 前端  │            │
│  │ • 原型  │      │ • 部署  │      │ • 安全  │      │ • 集成  │            │
│  └─────────┘      └─────────┘      └─────────┘      └─────────┘            │
│       │                │                │                │                  │
│       ▼                ▼                ▼                ▼                  │
│  📄 PRD 文档      📄 技术选型文档   📄 设计文档       📁 代码仓库            │
│                                                                             │
│  Phase 5          Phase 6          Phase 7          持续                    │
│  测试策略          文档交付          部署运维          复盘                   │
│  ┌─────────┐      ┌─────────┐      ┌─────────┐      ┌─────────┐            │
│  │ • 单测  │  →   │ • 用户  │  →   │ • CI/CD │  →   │ • 总结  │            │
│  │ • API测 │      │   手册  │      │ • 监控  │      │ • 更新  │            │
│  │ • E2E   │      │ • 管理员│      │ • 备份  │      │ • 方法论│            │
│  │ • TDD   │      │   手册  │      │         │      │         │            │
│  └─────────┘      └─────────┘      └─────────┘      └─────────┘            │
│       │                │                                                    │
│       ▼                ▼                                                    │
│  📄 测试用例      📄 交付文档                                                │
│                   (MD → PDF)                                                │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

---

## Phase 1: 需求分析

> 📄 详细指南：`phase-1-requirements.md`  
> 📄 产出模板：`templates/prd-template.md`

### 必须回答的问题

#### 1.1 业务问题

| 问题 | 为什么重要 | 影响 |
|------|-----------|------|
| 这个系统要解决什么业务问题？ | 明确项目价值 | 需求优先级 |
| 目标用户是谁？有几类用户？ | 决定权限模型复杂度 | 系统架构 |
| 核心业务流程是什么？ | 明确 MVP 范围 | 开发顺序 |
| 成功标准是什么？ | 可衡量的目标 | 验收标准 |

#### 1.2 规模问题

| 问题 | 为什么重要 | 影响 |
|------|-----------|------|
| 预计用户量级？ | 影响架构选型 | 数据库、缓存、部署 |
| 预计并发量？ | 影响性能设计 | 限流、队列、扩展 |
| 数据量预估？ | 影响存储选型 | 数据库、分表策略 |
| 增长预期？ | 预留扩展空间 | 架构弹性 |

**规模-架构对应参考：**

| 用户量 | 并发 | 推荐架构 |
|--------|------|----------|
| < 100 | < 10 | 单体应用，单服务器 |
| 100-1K | 10-100 | 单体应用，可考虑读写分离 |
| 1K-10K | 100-1K | 单体或微服务，负载均衡，缓存 |
| > 10K | > 1K | 微服务，容器编排，分布式 |

#### 1.3 权限问题

| 问题 | 为什么重要 | 常见模式 |
|------|-----------|----------|
| 有几种用户角色？ | 权限模型设计 | RBAC / ABAC |
| 权限粒度？（页面级/功能级/数据级） | 实现复杂度 | - |
| 是否需要审批流程？ | 状态机设计 | - |
| 是否需要数据隔离？（多租户） | 架构设计 | 共享库/独立库 |

#### 1.4 集成问题

| 问题 | 为什么重要 | 预留设计 |
|------|-----------|----------|
| 需要对接哪些外部系统？ | 接口设计 | 适配器模式 |
| 未来可能对接 SSO 吗？ | 认证架构 | 抽象认证层 |
| 需要开放 API 给第三方吗？ | API 设计 | 版本管理，认证 |
| 需要导入/导出数据吗？ | 数据格式 | 批量接口 |

### 产出物

- [ ] PRD 文档（包含功能需求、非功能需求）
- [ ] 用户角色与权限矩阵
- [ ] 核心业务流程图
- [ ] 优先级划分（P0/P1/P2/P3）
- [ ] MVP 范围定义

---

## Phase 2: 技术选型

> 📄 详细指南：`phase-2-tech-selection.md`  
> 📄 产出模板：`templates/tech-selection-template.md`

### 选型原则

| 原则 | 说明 |
|------|------|
| **团队熟悉度优先** | 不要为了"先进"选团队不熟悉的技术 |
| **与现有技术栈对齐** | 降低维护成本，便于知识共享 |
| **社区活跃度** | 遇到问题能找到解决方案 |
| **长期维护** | 避免选择可能被废弃的技术 |
| **满足需求即可** | 不过度设计，不追求完美 |

### 必须决策的事项

#### 2.1 后端技术栈

| 决策项 | 主流选项 | 决策依据 |
|--------|----------|----------|
| **语言** | Python / Node.js / Java / Go / C# | 团队熟悉度，生态需求 |
| **框架** | FastAPI / Django / Express / Spring Boot / .NET | 项目复杂度，开发效率 |
| **数据库** | PostgreSQL / MySQL / MongoDB | 数据结构，查询模式 |
| **缓存** | Redis / Memcached | 是否需要持久化 |
| **队列** | Redis / RabbitMQ / Kafka | 消息量，可靠性要求 |

#### 2.2 前端技术栈

| 决策项 | 主流选项 | 决策依据 |
|--------|----------|----------|
| **框架** | React / Vue / Angular | 团队熟悉度，生态 |
| **UI 库** | Ant Design / Element Plus / Material UI | 组件丰富度，定制需求 |
| **状态管理** | Redux / Pinia / Zustand | 项目复杂度 |
| **构建工具** | Vite / Webpack | 开发体验 |

#### 2.3 基础设施

| 决策项 | 主流选项 | 决策依据 |
|--------|----------|----------|
| **部署方式** | Docker / K8s / 直接部署 | 运维能力，规模 |
| **云服务商** | AWS / Azure / 阿里云 / 本地 | 合规要求，成本 |
| **CI/CD** | GitHub Actions / GitLab CI / Jenkins | 代码托管平台 |
| **监控** | Prometheus / Grafana / 云原生 | 运维成熟度 |

### 产出物

- [ ] 技术选型文档（含选型理由）
- [ ] 架构图
- [ ] 目录结构规划
- [ ] 开发环境要求

---

## Phase 3: 系统设计

> 📄 详细指南：`phase-3-system-design.md`  
> 📄 UI/UX 设计原则：`phase-3-ui-design-principles.md`  
> 📄 产出模板：`templates/database-design-template.md`、`templates/api-design-template.md`

### 架构设计原则

| 原则 | 说明 | 实践 |
|------|------|------|
| **分层架构** | 各层职责清晰 | Controller → Service → Repository |
| **依赖倒置** | 依赖抽象而非具体 | 定义 Interface，实现可切换 |
| **配置外部化** | 行为通过配置控制 | 功能开关，环境变量 |
| **关注点分离** | 业务逻辑与技术细节分离 | 领域驱动设计 |

### 必须设计的内容

#### 3.1 数据库设计

- [ ] ER 图（实体关系）
- [ ] 表结构设计（含字段类型、索引、约束）
- [ ] 敏感数据标识与加密方案
- [ ] 软删除策略
- [ ] 审计字段（created_at, updated_at, deleted_at）

#### 3.2 API 设计

- [ ] RESTful 接口定义
- [ ] 统一响应格式
- [ ] 错误码体系
- [ ] 认证方案（JWT / Session）
- [ ] 权限控制方案

#### 3.3 安全设计

> 📄 详细清单：`checklists/security-checklist.md`

- [ ] 认证与会话管理
- [ ] 密码存储方案（bcrypt/Argon2）
- [ ] 敏感数据加密（AES-256）
- [ ] 传输安全（HTTPS）
- [ ] 输入校验与防注入
- [ ] CORS 策略
- [ ] 日志脱敏

#### 3.4 UI/UX 设计

> 📄 详细指南：`phase-3-ui-design-principles.md`

- [ ] 终端用户界面使用向导式交互（Wizard Pattern）
- [ ] 登录后首页使用引导页模式（Launchpad），而非 Dashboard
- [ ] 界面选项从后端配置接口动态获取，无硬编码
- [ ] 管理员界面使用传统表格/表单布局

#### 3.5 扩展性设计

- [ ] 外部服务抽象（邮件、存储、第三方 API）
- [ ] 功能开关设计
- [ ] 枚举与配置管理
- [ ] 多语言预留（如需要）
- [ ] SSO 集成预留（如需要）

### 产出物

- [ ] 数据库设计文档
- [ ] API 设计文档
- [ ] 安全设计方案
- [ ] 配置管理方案
- [ ] UI 原型 / 交互设计（含向导式流程）

---

## Phase 4: 代码实现

> 📄 详细指南：`phase-4-implementation.md`

### 实现原则

| 原则 | 说明 |
|------|------|
| **先跑通再完善** | 先实现核心流程，再优化细节 |
| **持续集成** | 小步提交，频繁集成 |
| **测试先行** | 核心逻辑必须有单测 |
| **代码规范** | 遵循语言/框架的最佳实践 |

### 建议的实现顺序

```
1. 基础设施
   ├── 项目骨架搭建
   ├── 数据库连接
   ├── 配置管理
   └── 日志框架

2. 认证模块
   ├── 用户模型
   ├── 注册/登录
   ├── JWT 签发/验证
   └── 权限中间件

3. 核心业务模块
   ├── 按 P0 优先级实现
   ├── 每个模块: Model → Repository → Service → Controller
   └── 配套单元测试

4. 管理后台
   ├── 用户管理
   ├── 配置管理
   └── 数据概览

5. 前端实现
   ├── 路由与布局
   ├── 认证流程
   ├── 核心页面
   └── 管理后台
```

---

## Phase 5: 测试策略

> 📄 详细指南：`phase-4-testing.md`

### 测试金字塔

```
         ▲
        /│\         E2E 测试 (少量，人工为主)
       / │ \        
      /──┼──\       集成测试 (适量，自动化)
     /   │   \      
    /────┼────\     单元测试 (大量，自动化)
```

### TDD 工作流

```
写测试用例 → 运行失败(红) → 实现代码 → 运行通过(绿) → 重构
```

### 测试类型与覆盖

| 类型 | 覆盖内容 | 执行方式 | 优先级 |
|------|----------|----------|:------:|
| **单元测试** | 校验函数、状态机、计算逻辑 | pytest 自动化 | P0 |
| **API 集成测试** | 所有 API 端点 | pytest + httpx | P0 |
| **E2E 测试** | 关键业务流程 | 人工 Checklist | P1 |

### 测试文件组织

```
docs/test-cases/
├── unit-tests.md       # 单元测试用例（人类可读）
├── api-tests.md        # API 测试用例
└── e2e-checklist.md    # E2E 测试清单

tests/
├── unit/               # 自动化单元测试
├── integration/        # 自动化 API 测试
└── conftest.py         # fixtures
```

### 产出物

- [ ] 测试用例文档（先于代码）
- [ ] pytest 测试代码
- [ ] E2E 测试 Checklist
- [ ] 测试覆盖率报告

---

## Phase 6: 文档交付

> 📄 详细指南：`phase-5-documentation.md`

### 文档策略

```
开发中维护 Markdown ──────► 上线前导出 PDF（正式交付）
        │
        └──────────────► 同时作为 AI 问答知识源
```

### 文档类型

| 文档 | 读者 | 内容 | 格式 |
|------|------|------|------|
| **用户手册** | 终端用户 | 功能操作说明 | Markdown → PDF |
| **管理员手册** | 系统管理员 | 后台管理操作 | Markdown → PDF |
| **部署文档** | 运维 | 安装配置步骤 | Markdown |
| **API 文档** | 开发者 | 接口说明 | Swagger 自动生成 |

### 文档编写时机

| 开发阶段 | 文档更新 |
|----------|----------|
| 完成用户功能 | 更新 user-guide.md |
| 完成管理功能 | 更新 admin-guide.md |
| 完成部署脚本 | 更新 deployment.md |

### 产出物

- [ ] 用户手册 (user-guide.md → PDF)
- [ ] 管理员手册 (admin-guide.md → PDF)
- [ ] 部署文档 (deployment.md)
- [ ] 项目知识索引 (供 AI 查询)

---

## Phase 7: 部署与运维

> 📄 详细清单：`checklists/production-readiness.md`

### 生产就绪检查清单

#### 安全
- [ ] HTTPS 配置
- [ ] 安全响应头
- [ ] 密钥管理（环境变量，不入代码库）
- [ ] 依赖漏洞扫描

#### 可靠性
- [ ] 错误处理与友好提示
- [ ] 数据库备份策略
- [ ] 灾难恢复计划
- [ ] 健康检查接口

#### 可观测性
- [ ] 日志收集
- [ ] 性能监控
- [ ] 错误追踪
- [ ] 告警配置

#### 运维
- [ ] 部署文档
- [ ] 回滚方案
- [ ] 数据库迁移流程
- [ ] 运维手册

---

## 企业级关注点清单

> 📄 详细清单：`checklists/enterprise-concerns.md`

这些是企业级项目必须考虑但容易遗漏的点：

### 认证与身份

| 关注点 | 说明 | 优先级 |
|--------|------|:------:|
| 密码策略 | 长度、复杂度、过期 | P1 |
| 登录保护 | 失败锁定、验证码 | P1 |
| 会话管理 | 超时、并发登录控制 | P1 |
| SSO 预留 | 抽象认证层 | P2 |
| MFA | 多因素认证 | P2 |

### 数据安全

| 关注点 | 说明 | 优先级 |
|--------|------|:------:|
| 数据分级 | 识别敏感数据 | P0 |
| 加密存储 | 密码、敏感字段 | P0 |
| 传输加密 | HTTPS | P0 |
| 日志脱敏 | 不记录敏感信息 | P1 |
| 数据备份 | 定期备份、测试恢复 | P1 |

### 审计与合规

| 关注点 | 说明 | 优先级 |
|--------|------|:------:|
| 操作日志 | 谁在什么时候做了什么 | P1 |
| 数据保留 | 保留期限、删除策略 | P2 |
| 隐私合规 | GDPR、个人信息保护法 | P2 |
| 访问审计 | 敏感数据访问记录 | P2 |

### 可用性与性能

| 关注点 | 说明 | 优先级 |
|--------|------|:------:|
| 错误处理 | 优雅降级、友好提示 | P0 |
| 超时控制 | 避免无限等待 | P1 |
| 限流 | 防止滥用 | P1 |
| 缓存策略 | 热点数据缓存 | P2 |
| 负载均衡 | 多实例部署 | P2 |

### 可维护性

| 关注点 | 说明 | 优先级 |
|--------|------|:------:|
| 数据库迁移 | 版本化管理 | P0 |
| 配置管理 | 环境分离 | P0 |
| 文档 | API 文档、部署文档 | P1 |
| 监控告警 | 主动发现问题 | P1 |

---

## 附：决策记录模板

每个重要的技术决策都应该记录，格式如下：

```markdown
### 决策：[决策标题]

**背景**：为什么需要做这个决策？

**选项**：
1. 选项 A - 描述
2. 选项 B - 描述
3. 选项 C - 描述

**决策**：选择了选项 X

**理由**：为什么选择这个选项？

**影响**：这个决策带来什么影响？

**日期**：YYYY-MM-DD
```

---

## 版本历史

| 版本 | 日期 | 更新内容 |
|------|------|----------|
| v1.0 | 2025-01-27 | 初始版本 |
| v1.1 | 2025-01-27 | 添加测试策略(Phase 5)、文档交付(Phase 6)阶段 |
