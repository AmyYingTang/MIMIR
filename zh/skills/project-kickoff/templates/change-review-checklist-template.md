# 变更检查清单模板

> **用途**: 确保任何重大变更后文档保持一致性  
> **使用方式**: 在修改任何项目文档后填写此清单

---

## 变更检查清单

**变更文档**: _________________  
**变更类型**: [ ] 新功能 | [ ] Bug 修复 | [ ] 增强 | [ ] 重构  
**变更描述**: _________________  
**变更日期**: YYYY-MM-DD  
**变更人**: _________________

---

## 第一步：识别受影响的文档

根据 `doc-dependencies-template.md`，检查哪些文档可能需要更新：

### 如果 UI 原型变更：
- [ ] API 设计 - 此 UI 是否需要新的/修改的 API？
- [ ] 状态机 - 此 UI 是否展示新的状态或转换？
- [ ] 业务规则 - 此 UI 是否实现新的校验或逻辑？
- [ ] PRD - 此功能是否在需求文档中记录？
- [ ] 测试用例 - 测试是否覆盖此新功能？

### 如果 PRD 变更：
- [ ] API 设计 - API 是否支持新需求？
- [ ] 数据库设计 - 数据模型是否充分？
- [ ] UI 原型 - UI 是否针对新功能更新？
- [ ] 状态机 - 新流程是否已定义？
- [ ] 业务规则 - 新规则是否已文档化？

### 如果 API 设计变更：
- [ ] 数据库设计 - 所需的表/字段是否存在？
- [ ] 业务规则 - 校验逻辑是否已文档化？
- [ ] 状态机 - 通过 API 的状态转换是否已定义？
- [ ] 错误码 - 新错误码是否已文档化？

### 如果数据库设计变更：
- [ ] API 设计 - API 是否应暴露新字段？
- [ ] 迁移脚本 - 是否已创建迁移脚本？

### 如果状态机变更：
- [ ] API 设计 - 状态转换 API 是否已定义？
- [ ] 业务规则 - 转换规则是否已文档化？
- [ ] 数据库设计 - 状态枚举是否已更新？

### 如果业务规则变更：
- [ ] API 设计 - 校验是否在 API 中实现？
- [ ] 测试用例 - 规则是否被测试覆盖？

---

## 第二步：检查每个受影响的文档

对于上面勾选的每一项，评估：

| 文档 | 需要更新？ | 所需操作 | 状态 |
|------|:---------:|----------|:----:|
| | [ ] 是 [ ] 否 | | ⬜ |
| | [ ] 是 [ ] 否 | | ⬜ |
| | [ ] 是 [ ] 否 | | ⬜ |
| | [ ] 是 [ ] 否 | | ⬜ |
| | [ ] 是 [ ] 否 | | ⬜ |

**状态图例**: ⬜ 待处理 | 🔄 进行中 | ✅ 完成 | ⏭️ 跳过（附原因）

---

## 第三步：记录已完成的更新

### 已完成的更新

| 文档 | 版本 | 所做的修改 |
|------|------|-----------|
| | | |
| | | |
| | | |

### 需要人工决策的事项

| 事项 | 问题 | 决策人 | 状态 |
|------|------|--------|:----:|
| | | | ⬜ 待定 |
| | | | |

### 有意跳过的事项

| 文档 | 跳过原因 |
|------|----------|
| | |

---

## 第四步：更新项目控制文档

- [ ] 已更新文档索引（新增/修改的文档）
- [ ] 已更新版本历史
- [ ] 已更新「待解决问题」（如有待定决策）
- [ ] 已更新「沟通与决策记录」

---

## 第五步：最终验证

- [ ] 所有受影响的文档已被检查
- [ ] 所有必要的更新已完成
- [ ] 版本号保持一致
- [ ] 项目控制文档反映当前状态
- [ ] 变更已准备好提交

---

## 备注

_在此添加任何额外的说明、上下文或后续事项：_

---

## 签字确认

**检查人**: _________________  
**检查日期**: _________________  
**通过**: [ ] 是 | [ ] 否 - 原因: _________________

---

## 快速参考：常见变更模式

### 模式 1：新功能
```
PRD → API 设计 → 数据库设计 → 状态机 → UI 原型 → 测试用例
```

### 模式 2：业务逻辑 Bug 修复
```
业务规则 → API 设计 → 测试用例
```

### 模式 3：UI 改进
```
UI 原型 → （可能）API 设计 → 测试用例
```

### 模式 4：性能优化
```
数据库设计 → API 设计 → 部署文档
```

### 模式 5：安全增强
```
安全设计 → API 设计 → 业务规则 → 测试用例
```

---

## 版本历史

| 版本 | 日期 | 更新内容 |
|------|------|----------|
| v1.0 | 2025-01-28 | 初始版本 |
